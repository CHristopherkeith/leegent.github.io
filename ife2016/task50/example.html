<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>Vue示例</title>
</head>
<body>
	<div id='app'></div>
	<script src='src/lib/vue.min.js'></script>
	<script src='src/lib/vue-router.min.js'></script>
    <script src="src/main.js"></script>
<script>
    var ch = Vue.extend({
        template:"<input v-model='msg'>&nbsp;<button v-on:click='notify'>Dispatch Event</button>" +
        "<slot name='one'></slot>" +
        "<button v-on:click='show'>Show Parent Message</button>" +
        "<slot name='two'></slot>" +
        "<span>{{ pmsg }}</span>",
        data:function () {
            return { msg:"hello" };
        },
        props:["pmsg"],
        methods:{
            notify:function () {
                if(this.msg.trim()){
                    console.log(this.msg);
                    this.$dispatch("child-msg",this.msg);
                    this.msg="";
                }
            },
            show:function () {
                this.msg = this.pmsg;
            }
        }
    });

    var ch2 = Vue.extend({
        template:"<p>I'm child 2!</p>"
    });

    var MyComponent = Vue.extend({
        template:"<div>A test component!<br>" +
        "<component :is='current'>" +
        "<p slot='one'>There are some contents here.</p>" +
        "<p slot='two'>There are another some contents here.</p>" +
        "</component>" +
        "<p>{{ messages | json }}</p>" +
        "</div>",
        data:function () {
            return {
                messages : [],
                current:"child"
            };
        },
        components:{
            child: ch,
            child2 : ch2
        },
        events:{
            "child-msg":function (msg) {
                this.messages.push(msg);
            }
        }
    });
    // 组件在注册之后，便可以在父实例的模块中以自定义元素 <my-component> 的形式使用。要确保在初始化根实例之前注册了组件：
    // 全局注册自定义组件，替换app标签
//    Vue.component("app",MyComponent);
    // 创造全局Vue根实例。el:元素只用作挂载点。如果提供了模板则元素被替换，除非 replace 为 false
    new Vue({
        el:"#app",
        components:{
            "app":MyComponent
        }
    });
</script>
</body>
</html>